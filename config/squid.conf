http_port 3128

# Define local networks (Docker, Localhost, LAN)
acl localnet src 10.0.0.0/8
acl localnet src 172.16.0.0/12
acl localnet src 192.168.0.0/16
acl localnet src 127.0.0.1/32

# Define ports
acl SSL_ports port 443
acl Safe_ports port 80
acl Safe_ports port 21
acl Safe_ports port 443
acl Safe_ports port 70
acl Safe_ports port 210
acl Safe_ports port 1025-65535
acl CONNECT method CONNECT

# Access Control
http_access deny !Safe_ports
http_access deny CONNECT !SSL_ports

# Manager access
http_access allow localhost manager
http_access deny manager

# Blocklist Rule
# We use a separate file for the domains
acl porn_domains dstdomain "/etc/porn-blocker/squid.blocklist"
http_access deny porn_domains

# Allow Local Development and LAN
http_access allow localnet
http_access allow localhost

# Deny everything else by default? 
# NO, we want to allow normal browsing, just block porn.
# So we allow all other access.
http_access allow all
